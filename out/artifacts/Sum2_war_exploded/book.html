<!DOCTYPE html >
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>å›¾ä¹¦ç®¡ç†é¡µé¢</title>
</head>
<body>

<div id="container">


  <form action="bookServlet" method="Post" id="addBook">
    <table align="center">
      <tr>
        <th>ä¹¦å</th>
        <th>ä½œè€…</th>
        <th>ä¹¦å·</th>
        <th>åº“å­˜</th>
      </tr>

      <tr>
        <td>æ·»åŠ å›¾ä¹¦:<input type="text" name="bookname" id="bookname"></td>
        <td><input type="text" name="author" id="author"></td>
        <td><input type="text" name="ID" id="ID"></td>
        <td><input type="text" name="remain" id="remain"></td>
        <td><input type="submit" value="ç¡®è®¤æ·»åŠ " id="submit"></td>
      </tr>
    </table>
  </form>










  <div class="show" >
    <h2>å›¾ä¹¦åˆ—è¡¨</h2>
    <table border="1" id="å›¾ä¹¦è¡¨" class="show" cellspacing="0" >
      <tr id="title">
        <th>ä¹¦å</th>
        <th>ä½œè€…</th>
        <th>ä¹¦å·</th>
        <th>åº“å­˜</th>
        <th>æ“ä½œ</th>
      </tr>

      <!-- éœ€è¦å¾ªç¯æŸ¥è¯¢æ¸²æŸ“æ•°æ®åº“ -->
      <tr th:if="${#lists.isEmpty(session.bookList)}">
        <td colspan="4">åº“å­˜ä¸ºç©º</td>
      </tr>
      <tr th:unless="${#lists.isEmpty(session.bookList)}" th:each="oneBook: ${session.bookList}">
        <td th:text="${oneBook.bookName}"></td>
        <td th:text="${oneBook.author}"></td>
        <td th:text="${oneBook.ID}"></td>
        <td th:text="${oneBook.remain}"></td>
        <!--  <td><button  th:data-pid="${oneBook.ID}" th:onclick="delBook(this.setAttribute('data-pid'))">åˆ é™¤</button></td>-->
        <td><button  th:onclick="delBook([[${oneBook.ID}]])">åˆ é™¤</button></td><!--å¯¹å’¯ï¼-->
        <!-- æ³¨æ„åŠ¨æ€å–å‡ºidå€¼çš„å†™æ³•!!!!!????!!!!! -->
      </tr>
    </table>
    <div><!-- åˆ†é¡µæ  -->
      <input type="button" value="é¦–é¡µ" class="btn" th:onclick="window.location.href='bookServlet?pageNo='+1"  th:disabled="${session.pageNo<2||session.pageNo==null}"/>
      <input type="button" value="ä¸Šä¸€é¡µ" class="btn" th:onclick="window.location.href='bookServlet?pageNo='+[[${session.pageNo-1}]] " th:disabled="${session.pageNo<2}"/>
      <input type="button" value="ä¸‹ä¸€é¡µ" class="btn" th:onclick="window.location.href='bookServlet?pageNo='+[[${session.pageNo+1}]]" th:disabled="${session.pageNo==session.countPage}"/>
      <input type="button" value="å°¾é¡µ" class="btn" th:onclick="window.location.href='bookServlet?pageNo='+[[${session.countPage}]]" th:disabled="${session.pageNo==session.countPage}"/>
    </div>
    <button id="exit" onclick="window.location.href='é¦–é¡µ.html'">è¿”å›</button>
  </div>











  <div id="search" class="show" style="float: right;">
    <form action="search" method="Post">
      <input type="text" name="aim" placeholder="è¯·è¾“å…¥å…³é”®å­—" th:value="${session.SearchAim}"/><input type="submit" value="æŸ¥æ‰¾ğŸ”">
    </form>
    <table  cellspacing="5px" id="searchID">
      <tr th:if="${#lists.isEmpty(session.AimBook)}">
        <td colspan="4" th:text="${session.isSearched}"></td>
      </tr>
      <tr th:unless="${#lists.isEmpty(session.bookList)}" th:each="oneBook: ${session.AimBook}">
        <td th:text="${oneBook.bookName}"></td>
        <td th:text="${oneBook.author}"></td>
        <td th:text="${oneBook.ID}"></td>
        <td th:text="${oneBook.remain}"></td>
        <td><button  th:onclick="delBook([[${oneBook.ID}]])">åˆ é™¤</button></td><!--å¯¹å’¯ï¼-->
        <!-- æ³¨æ„åŠ¨æ€å–å‡ºidå€¼çš„å†™æ³•!!!!!????!!!!! -->
      </tr>
    </table>
    <button onclick="window.location.href='search'" style="float:right">x</button>
  </div>



</div>
</body>







<style type="text/css">

  #container{
    margin: 0 15%;
    background-color: #E6E6FA;
  }

  #title{
    color:white;
    background-color: #6495ED;
  }

  body{
    background-image:url('å£çº¸.jpg');
  }
  #exit{
    height: 50px;
    width: 150px;
    color:white;
    background-color: #6495ED;
  }
  #search{
    border-color:#6495ED;
    margin:0px 10%;
  }
  .show{
    display: inline-block;
  }
  #search{
    margin: 5% 40% 0 0;
    background-color: #F8F8FF;
  }


</style>



<script type="text/javascript" src="jQuery.js"></script>
<script type="text/javascript">//éªŒè¯è¡¨å•å…¨éƒ¨è¾“å…¥å®Œæ•´
$("#submit").click(function(){
  if($("#bookname").val()==""||$("#author").val()==""||$("#ID").val()==""||$("#remain").val()==""){
    alert("ä¿¡æ¯æœªè¾“å…¥å®Œæ•´");
    return false;
  }
});

function delBook(ID){

  if(confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤ï¼Ÿ'))
    window.location.href='del.do?ID='+ID;
}


</script>

</html>